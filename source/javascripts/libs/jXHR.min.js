// jXHR.js (JSON-P XHR)
// v0.1 (c) Kyle Simpson
// MIT License
(function(a){var b=a.setTimeout,c=a.document,d=0;a.jXHR=function(){function j(){try{h.parentNode.removeChild(h)}catch(a){}}function k(){f=!1,e="",j(),h=null,n(0)}function l(a){try{i.onerror.call(i,a,e)}catch(b){throw new Error(a)}}function m(){if(this.readyState&&this.readyState!=="complete"&&this.readyState!=="loaded"||f)return;this.onload=this.onreadystatechange=null,f=!0,i.readyState!==4&&l("Script failed to load ["+e+"]."),j()}function n(a,b){b=b||[],i.readyState=a,typeof i.onreadystatechange=="function"&&i.onreadystatechange.apply(i,b)}var e,f,g,h,i=null;return i={onerror:null,onreadystatechange:null,readyState:0,open:function(b,c){k(),internal_callback="cb"+d++,function(b){a.jXHR[b]=function(){try{n.call(i,4,arguments)}catch(c){i.readyState=-1,l("Script failed to run ["+e+"].")}a.jXHR[b]=null}}(internal_callback),e=c.replace(/=\?/,"=jXHR."+internal_callback),n(1)},send:function(){b(function(){h=c.createElement("script"),h.setAttribute("type","text/javascript"),h.onload=h.onreadystatechange=function(){m.call(h)},h.setAttribute("src",e),c.getElementsByTagName("head")[0].appendChild(h)},0),n(2)},setRequestHeader:function(){},getResponseHeader:function(){return""},getAllResponseHeaders:function(){return[]}},k(),i}})(window);